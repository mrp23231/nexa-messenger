#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Nexa Messenger —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
"""

import os
import sys
from app import app, socketio

def main():
    """–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞"""
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
    host = '0.0.0.0'  # –î–æ—Å—Ç—É–ø —Å–æ –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
    port = 8080
    debug = False  # –û—Ç–∫–ª—é—á–∞–µ–º —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
    
    print("üöÄ –ó–∞–ø—É—Å–∫ Nexa Messenger –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞...")
    print(f"   –•–æ—Å—Ç: {host}")
    print(f"   –ü–æ—Ä—Ç: {port}")
    print(f"   –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏: {'–í–∫–ª—é—á–µ–Ω' if debug else '–í—ã–∫–ª—é—á–µ–Ω'}")
    print(f"   –î–æ—Å—Ç—É–ø: http://localhost:{port}")
    print(f"   –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: http://localhost:{port}/admin")
    print("\nüì± –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞:")
    print(f"   ‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ {port} –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ")
    print(f"   ‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –≤–Ω–µ—à–Ω–∏–π IP –∞–¥—Ä–µ—Å")
    print(f"   ‚Ä¢ –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç")
    print("\nüîê –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞:")
    print(f"   ‚Ä¢ Username: admin")
    print(f"   ‚Ä¢ –ü–∞—Ä–æ–ª—å: admin123456")
    print("\n‚èπÔ∏è  –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞–∂–º–∏—Ç–µ Ctrl+C")
    
    try:
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        socketio.run(
            app,
            host=host,
            port=port,
            debug=debug,
            use_reloader=False,  # –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É
            log_output=True
        )
    except KeyboardInterrupt:
        print("\n\nüõë –°–µ—Ä–≤–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        sys.exit(0)
    except Exception as e:
        print(f"\n‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")
        sys.exit(1)

if __name__ == '__main__':
    main()
